<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PitchPerfect AI - Live Demo</title>
    <style>
      body {
        background-color: #1a1a1a;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        overflow: hidden;
      }

      /* The Phone Container */
      .phone-frame {
        width: 375px;
        height: 812px;
        background: #000;
        border-radius: 40px;
        box-shadow: 0 0 50px rgba(0, 255, 136, 0.2);
        border: 10px solid #333;
        position: relative;
        overflow: hidden;
      }

      /* The Webcam Video */
      video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transform: scaleX(-1); /* Mirror effect */
      }

      /* UI Overlay Layer */
      .ui-layer {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; /* Let clicks pass through */
      }

      /* Top Bar */
      .header {
        position: absolute;
        top: 20px;
        left: 20px;
        color: white;
        z-index: 10;
      }
      .header h3 {
        margin: 0;
        font-weight: 600;
        font-size: 18px;
      }

      /* The Score Badge */
      .score-badge {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: 4px solid #00ff88;
        display: flex;
        justify-content: center;
        align-items: center;
        background: rgba(0, 0, 0, 0.5);
        color: #00ff88;
        font-weight: bold;
        font-size: 24px;
        box-shadow: 0 0 15px rgba(0, 255, 136, 0.4);
        transition: all 0.5s ease;
      }
      .score-label {
        position: absolute;
        bottom: 15px;
        font-size: 10px;
        color: #aaa;
      }

      /* The Green "Eye Tracking" Box */
      .face-tracker {
        position: absolute;
        top: 25%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 180px;
        height: 220px;
        border: 2px solid #00ff88;
        border-radius: 12px;
        box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
      }

      .face-tracker::before {
        content: ""; /* The glowing corners */
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border: 2px solid transparent;
        border-radius: 12px;
        animation: pulse-border 2s infinite;
      }

      .tracker-label {
        position: absolute;
        top: -30px;
        left: 0;
        background: rgba(0, 255, 136, 0.2);
        color: #00ff88;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 600;
        border: 1px solid #00ff88;
      }

      /* The "Filler Word" Popup Alert */
      .alert-box {
        position: absolute;
        top: 60%;
        left: 50%;
        transform: translate(-50%, 0);
        background: rgba(40, 40, 40, 0.9);
        backdrop-filter: blur(10px);
        padding: 15px 20px;
        border-radius: 15px;
        border-left: 4px solid #ff4444;
        color: white;
        width: 220px;
        opacity: 0; /* Hidden by default */
        transition: opacity 0.5s ease;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      }
      .alert-box.show {
        opacity: 1;
      }
      .alert-title {
        font-size: 12px;
        color: #aaa;
        margin-bottom: 4px;
      }
      .alert-content {
        font-size: 16px;
        font-weight: bold;
      }

      /* The Waveform Visualizer */
      .waveform {
        position: absolute;
        bottom: 40px;
        left: 0;
        width: 100%;
        height: 60px;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 4px;
      }
      .bar {
        width: 6px;
        background: #00ff88;
        border-radius: 10px;
        animation: wave 0.5s infinite ease-in-out;
      }
      .pacing-label {
        position: absolute;
        bottom: 20px;
        width: 100%;
        text-align: center;
        color: #00ff88;
        font-size: 14px;
        font-weight: 500;
      }

      /* Start Button */
      #start-btn {
        position: absolute;
        z-index: 100;
        padding: 15px 30px;
        background: #00ff88;
        color: #000;
        border: none;
        border-radius: 30px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 0 20px rgba(0, 255, 136, 0.6);
      }

      /* Animations */
      @keyframes pulse-border {
        0% {
          box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.4);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(0, 255, 136, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(0, 255, 136, 0);
        }
      }

      @keyframes wave {
        0%,
        100% {
          height: 10px;
          opacity: 0.5;
        }
        50% {
          height: 40px;
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <button id="start-btn">Start Demo</button>

    <div class="phone-frame">
      <video id="webcam" autoplay playsinline muted></video>

      <div class="ui-layer" id="ui-layer" style="display: none">
        <!-- Header -->
        <div class="header">
          <h3>PitchPerfect AI</h3>
        </div>

        <!-- Score -->
        <div class="score-badge">
          <span id="score-val">92</span>
          <span class="score-label">SCORE</span>
        </div>

        <!-- Face Tracker -->
        <div class="face-tracker">
          <div class="tracker-label">Eye Contact: Excellent</div>
        </div>

        <!-- Pop-up Alert -->
        <div class="alert-box" id="alert-box">
          <div class="alert-title">⚠️ Filler Word Detected</div>
          <div class="alert-content">"Um" (Count: 4)</div>
        </div>

        <!-- Waveform -->
        <div class="waveform">
          <!-- Generating bars via JS would be cleaner, but hardcoding for simplicity -->
          <div class="bar" style="animation-duration: 0.4s"></div>
          <div class="bar" style="animation-duration: 0.5s"></div>
          <div class="bar" style="animation-duration: 0.3s"></div>
          <div class="bar" style="animation-duration: 0.6s"></div>
          <div class="bar" style="animation-duration: 0.4s"></div>
          <div class="bar" style="animation-duration: 0.5s"></div>
          <div class="bar" style="animation-duration: 0.3s"></div>
          <div class="bar" style="animation-duration: 0.4s"></div>
          <div class="bar" style="animation-duration: 0.2s"></div>
          <div class="bar" style="animation-duration: 0.5s"></div>
        </div>
        <div class="pacing-label" id="pacing-label">Pacing: Optimal</div>
      </div>
    </div>

    <script>
      const video = document.getElementById("webcam");
      const startBtn = document.getElementById("start-btn");
      const uiLayer = document.getElementById("ui-layer");
      const scoreVal = document.getElementById("score-val");
      const alertBox = document.getElementById("alert-box");
      const pacingLabel = document.getElementById("pacing-label");

      startBtn.addEventListener("click", async () => {
        try {
          // Access the webcam
          const stream = await navigator.mediaDevices.getUserMedia({
            video: true,
          });
          video.srcObject = stream;

          // Hide button, show UI
          startBtn.style.display = "none";
          uiLayer.style.display = "block";

          // Start the "Fake Intelligence"
          startSimulation();
        } catch (err) {
          alert("Please allow camera access to use the demo!");
          console.error(err);
        }
      });

      function startSimulation() {
        // 1. Fluctuate Score slightly to look 'live'
        setInterval(() => {
          const randomScore = Math.floor(Math.random() * (95 - 89 + 1) + 89);
          scoreVal.innerText = randomScore;
        }, 3000);

        // 2. Trigger a "Filler Word" alert occasionally
        setTimeout(() => {
          showAlert("Um", 1);
        }, 5000); // Show after 5 seconds

        setTimeout(() => {
          showAlert("Like", 3);
        }, 12000); // Show after 12 seconds

        // 3. Change Pacing Label
        setInterval(() => {
          const states = [
            "Pacing: Optimal",
            "Pacing: Optimal",
            "Pacing: Analyzing...",
          ];
          const randomState = states[Math.floor(Math.random() * states.length)];
          pacingLabel.innerText = randomState;
        }, 4000);
      }

      function showAlert(word, count) {
        const content = alertBox.querySelector(".alert-content");
        content.innerText = `"${word}" (Count: ${count})`;

        alertBox.classList.add("show");

        // Hide after 3 seconds
        setTimeout(() => {
          alertBox.classList.remove("show");
        }, 3000);
      }
    </script>
  </body>
</html>
